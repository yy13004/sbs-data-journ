import streamlit as st

# 근로소득세 계산 함수
def calculator_tax(tax_base):
    if tax_base <= 14_000_000:
        return tax_base * 0.06
    elif tax_base <= 50_000_000:
        return 840_000 + (tax_base - 14_000_000) * 0.15
    elif tax_base <= 88_000_000:
        return 6_240_000 + (tax_base - 50_000_000) * 0.24
    elif tax_base <= 150_000_000:
        return 15_360_000 + (tax_base - 88_000_000) * 0.35
    elif tax_base <= 300_000_000:
        return 37_060_000 + (tax_base - 150_000_000) * 0.38
    elif tax_base <= 500_000_000:
        return 94_060_000 + (tax_base - 300_000_000) * 0.40
    elif tax_base <= 1_000_000_000:
        return 174_060_000 + (tax_base - 500_000_000) * 0.42
    else:
        return 384_060_000 + (tax_base - 1_000_000_000) * 0.45


# ==========================================
# 페이지 구성
# ==========================================
st.title("국가채무 50% 시대, 가계부 점검의 때가 왔다")
st.divider()

# ==========================================
# 입력
# ==========================================
annual_income = st.number_input(
    "연간 소득을 입력하세요(원)",
    min_value=0,
    value=50_000_000,
    step=1_000_000,
    format="%d"
)

st.caption(
    """
*현행 법정 근로소득세율을 적용하고, 공제 항목을 고려하지 않았습니다. 실제 재정은 다양한 세목으로 구성되며, 이는 단순히 규모 비교를 위한 계산입니다.
"""
)

# ==========================================
# 계산
# ==========================================
interest_expense = 29.4 * 10**12  # 29.4조원

if annual_income > 0:
    annual_tax = calculator_tax(annual_income)

    if annual_tax > 0:
        people_needed = interest_expense / annual_tax

        st.divider()

        st.metric(
            "당신과 같은 세액을 내는 근로자 수",
            f"**{people_needed:,.0f}명**"
        )

        st.markdown(
            f"""
당신의 연간 근로소득세는 **약 {annual_tax:,.0f}원**입니다.

2025년 국가채무 이자지출을 연간 근로소득세 규모로 단순 환산할 경우,  
당신과 동일한 세액을 납부하는 근로자 **약 {people_needed:,.0f}명**의  
1년치 세액에 해당합니다.
"""
        )
    else:
        st.info("세액이 0원으로 계산됩니다. 다른 금액을 입력해 주세요.")
else:
    st.info("금액을 입력하면 계산 결과가 표시됩니다.")

# ======================================================
# 기사 본문 시작
# ======================================================

st.divider()
# ------------------------------------------------------
# 1. 내 세금의 영수증
# ------------------------------------------------------

st.markdown("#### **국가채무 이자지출, 근로소득세 규모로 환산하면**")

st.markdown("""
2025년 본예산 기준 국가채무 이자지출은 29.4조원이다. 원금 상환이 아닌, 한 해 동안 빚에 대해 지급하는 ‘이자’ 비용을 말한다.

이 금액을 현행 법정 근로소득세율로 단순 환산하면, 연봉 5,000만원 근로자 약 471만1,538명이 1년간 내는 근로소득세 규모와 맞먹는다. 각종 공제 항목을 반영하지 않은 단순 추정치이지만, 29.4조원이라는 숫자를 개인의 세금 규모로 바꿔보는 순간 국가채무 이자지출은 더 이상 추상적인 재정 지표가 아니라 국민의 세금 부담 문제로 다가온다.
""")

# ------------------------------------------------------
# 2. 댓글 창에 쏟아진 분노
# ------------------------------------------------------
st.write("")
st.write("")
st.markdown("#### **유튜브 댓글 창에 쏟아진 분노, 무엇을 말하나**")

st.markdown("""
국가채무와 관련된 유튜브 댓글에서는 분노의 감정이 가득했다. 2026년 1월 19일 기준, ‘국가채무’, ‘국가부채’, ‘나라빚’ 키워드로 검색된 유튜브 영상 댓글 2만 1,820개를 분석한 결과, 국가채무 논의는 단순한 재정 문제를 넘어 정치적 책임 공방의 장으로 확장되고 있었다.
""")
st.write("")

## 의미연결망 시각화 이미지 업로드
st.image("html/network.png", use_container_width=True)

st.markdown(
    """
의미연결망을 시각화한 결과, 댓글은 세 개의 축으로 갈라졌다. '정치', '복지', 그리고 '조세' 키워드가 눈에 띄었다.
"""
)
st.write("")
st.markdown("**정치, ‘책임 공방’으로 전환**")
st.markdown("""
‘이재명’ 노드를 중심으로 ‘좌파’, ‘민주당’과 같은 정치적 키워드가 등장했다. ‘걱정’과 같은 정서적 표현과 결합하며 부정적 의미가 강화되는 모습을 확인할 수 있다. 국가채무 논의가 특정 인물 및 진영 평가로 전환되며 정치적 책임 공방의 질문으로 수렴하는 양상이었다.
 """)

st.markdown("**복지 그리고 세금, ‘권리’보다 ‘재정 운영 능력’으로 인식**")
st.markdown("""
‘복지’ 노드는 ‘지출’, '예산', ‘혜택’, ‘축소’와 연결됐다. ‘재정 부담’, ‘나라 살림’, ‘지출 관리’의 맥락에서 언급되며, 복지 확대가 곧 재정 악화로 이어질 수 있다는 인식이 반영되는 모습이었다. 

복지’는 ‘세금’ 노드와 결합했다. ‘도둑’, ‘낭비’, ‘공무원’, ‘월급’과 같은 단어가 함께 등장하며 불만과 불신의 영역으로 확장됐다. 지출 규모의 문제뿐만 아니라, 정부 재정 운영 능력과 신뢰에 대한 문제 제기였다. 

한편 ‘미래 세대' 키워드가 외곽에 위치하기도 했다. 국가채무의 경우 미래세대의 세금과 직결되기 때문에 장기적 부담에 대한 불만이 두드러지는 것으로 보인다. '미래세대' 키워드는 '최악'의 단어와 자주 등장했다.
""")

# ------------------------------------------------------
# 3. 숫자로 본 국가채무
# ------------------------------------------------------
st.write("")
st.write("")
st.markdown("#### **국가채무, 얼마나 심각할까**")

# 재정수지 그래프
import streamlit.components.v1 as components
with open("html/incomespending.html", "r", encoding="utf-8") as f:
    html_code = f.read()
components.html(html_code, height=800, scrolling=True)

st.markdown("""
사람들의 분노에는 근거가 있었다. 연도별 관리재정수지 추이를 보면, 2019년을 기점으로 적자 폭이 크게 확대됐다.  통합재정수지에서 4개 사회보장성기금을 제외한 관리재정수지는 정부의 실질적인 재정 상태를 보여주는 지표다. 통합재정수지란 당해연도의 순수한 수입에서 순수한 지출을 차감한 수치를 말한다. 최근 몇 년간 관리재정수지는 뚜렷한 적자를 기록하고 있다.
""")

# 적자성 채무 그래프
st.image("html/minus.png", use_container_width=True)

st.markdown("""
국가채무 역시 마찬가지였다. 국가채무는 금융성채무와 적자성채무로 구분된다. 금융성채무는 자산 매각이나 융자금 회수 등으로 자체 상환이 가능하지만, 적자성채무는 조세 등 국민 부담으로 상환해야 한다. 문제는 적자성채무의 증가 속도다. 코로나19 이후 확장재정이 본격화되며 총채무가 증가했는데, 적자성채무는 총채무 그래프의 증감폭과 같이 2019년을 기점으로 급격하게 상승했다. 이는 단순히 채무 규모가 커졌다는 의미를 넘어 미래세대의 세금 부담이 구조적으로 확대되고 있음을 뜻한다. 
""")

# ------------------------------------------------------
# 4. 비교 대상에 따라 숫자는 달라진다
# ------------------------------------------------------
st.write("")
st.write("")
st.markdown("#### **비교 대상에 따라 숫자는 달라진다**")

st.markdown("""
여기서 의문이 들 수 있다. 우리나라보다 부채 규모가 훨씬 큰 나라들도 많다. 그렇다면 왜 한국만 국가채무 문제를 유독 민감하게 받아들일까. 답은 비교 대상에 있다. 한국은 미국처럼 기축통화를 보유한 국가가 아니며, 일본처럼 통화 신뢰도가 높고 자국 통화로 국채를 안정적으로 소화할 수 있는 구조도 아니다. 통화 신뢰도와 금융시장 여건을 감안하면, 한국의 비교 대상은 ‘비기축통화국’이 되어야 한다.
""")

# 비기축통화국
import streamlit.components.v1 as components
with open("html/grossdebt.html", "r", encoding="utf-8") as f:
    html_code = f.read()
components.html(html_code, height=800, scrolling=True)

st.markdown("""
『Fiscal Monitor』 2025년 10월호에서 IMF가 선진국으로 분류한 11개 국가 중, 비기축통화국과 한국의 전년 대비 총부채 증감폭을 비교했다. 일부 국가에서 일시적으로 큰 증감폭이 보이긴 했지만, 문제는 2025년을 기점으로 한국의 부채 증감폭이 가장 높아질 전망이라는 것이다. 절대적인 부채 규모가 아닌 ‘증가 속도’를 살펴볼 때, 한국의 재정 경로에 대한 우려가 커지는 이유도 이 지점에서 찾을 수 있다.
""")

st.markdown("""
한편 일각에서는 한국의 비교대상을 G7과 같은 선진국으로 삼는다. 확장재정을 찬성하는 이들은 비기축통화국이란 용어가 한국 언론의 임의적인 표현으로 국가채무에 대한 공포심리를 조장한다고 비판한다. 한국과 선진국을 비교할 경우 한국의 부채 비율은 상대적으로 낮아진다. 
""")

# G7
import streamlit.components.v1 as components
with open("html/grossdebtG7.html", "r", encoding="utf-8") as f:
    html_code = f.read()
components.html(html_code, height=800, scrolling=True)

st.markdown("""
하지만 같은 IMF의 자료에 따르면, 코로나 당시 대규모 재정을 투입했던 G7은 최근 부채 증가 속도를 줄이고 있는 반면, 한국은 계속해서 부채가 증가하는 추세다. 그들의 입장에 따라 선진국과 비교했음에도 2021년 그 증감폭이 G7을 역전했다는 점에서 역시 문제가 된다.
""")


# ------------------------------------------------------
# 5. 복지인가, R&D인가
# ------------------------------------------------------
st.write()
st.write()
st.markdown("#### **복지인가, R&D인가… 결국 우선순위의 문제**")

import streamlit.components.v1 as components
with open("html/government.html", "r", encoding="utf-8") as f:
    html_code = f.read()
components.html(html_code, height=800, scrolling=True)

st.markdown("""
중앙정부 분야별 지출 추이를 보면 보건·복지·고용 분야의 지출은 꾸준히 증가해왔다. 한국의 복지 지출 비중이 여전히 OECD 선진국의 평균보다 낮은 편이며, 기본 사회 안전망 강화가 필요하다는 주장은 물론 간과되어서는 안 된다.
            
그러나 비용의 증가 속도를 살펴보아야 한다. 복지 지출 비용 증가 속도가 압도적이라는 점에서 문제가 된다. R&D 예산은 2018년 기준 19.7조원에서 2025년 29.7조원으로 10조원이 상승했지만, 총지출 대비 비중은 4.5에서 4.2%로 감소했다. 복지 비용 확대 속도가 타비용을 압도하며 투자 비중이 상대적으로 밀린 결과다.
이재명 정부에서 다시금 R&D 예산이 확대되었지만 복지와 같은 의무 지출이 전체 예산에서 차지하는 비중이 높아질수록, 산업 지원과 같은 재량 지출은 감소할 수 밖에 없다.
            
복지 투자와 성장 투자의 균형은 필요하다. 생산성과 성장률을 끌어올리는 투자와 복지 지출이 병행되지 않을 경우, 장기적인 재정 부담으로 전환될 수 있다는 점을 잊어서는 안 된다.
""")


# ------------------------------------------------------
# 6. 결론
# ------------------------------------------------------
st.markdown("#### **신축성과 규율 사이, 균형점을 위해선 재정준칙 논의가 선행돼야**")
st.markdown("""
확장 재정은 승수효과를 기대한다. 정부가 지출을 늘려 경기를 떠받치면, 소득과 소비가 확대되고 그 결과 세수가 증가해 결국 빚을 감당할 수 있다는 논리다. 반대로 재정 건전성을 중시하는 시각은 구축효과를 경고한다. 정부가 국채를 늘리면 시중금리가 오르고 민간 투자가 위축돼, 장기적으로 성장 기반이 약화될 수 있다는 주장이다.

국가채무 문제는 단순히 GDP 대비 몇 퍼센트인지의 싸움이 아니다. 한해 이자비용만 29.4조원에 이르는 현실에서, 국가의 허리띠를 졸라매는 선택은 곧 어떤 분야를 우선할 것인지에 대한 결정이 된다. 복지와 성장, 단기 경기와 장기 투자 사이에서 무엇을 앞세울 것인가. 재정은 숫자로 표현되지만, 그 방향은 결국 사회가 합의해야 할 가치의 문제다.

다만 재정준칙을 둘러싼 논의가 곧바로 폐기돼야 한다는 뜻은 아니다. 변혁기일수록 재정의 역할이 커질 수 있지만, 동시에 시장의 신뢰를 유지할 최소한의 기준 역시 필요하다. 단년도 3%라는 경직된 틀을 그대로 적용할지 여부와는 별개로, 중장기적으로 재정의 지속 가능성을 관리할 원칙이 없다면 정책 방향은 정권과 경기 상황에 따라 흔들릴 수밖에 없다. 신축성과 규율 사이에서 어떤 균형점을 찾을 것인지, 그 설계의 문제로 논의를 옮길 필요가 있다.
""")
